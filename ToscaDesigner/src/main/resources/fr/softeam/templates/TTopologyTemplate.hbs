{{#unless (noStereotypeApplications this "Metadata")}}metadata:{{/unless}}
{{#each ownedAttribute}}{{#extension}}{{#eq name "Metadata"}}
  {{../name}}: "{{../value}}"
{{/eq}}{{/extension}}{{/each}}
{{imports this}}
topology_template:
  {{#unless (noStereotypeApplications this "TNodeTemplate")}}node_templates:{{/unless}}  
  {{#ownedElement}}{{#extension}}{{#eq name "TNodeTemplate"}}
  {{> (lookup this.name) ../this}}
  {{/eq}}{{/extension}}{{/ownedElement}}
  {{#unless (noStereotypeApplications this "TGroup")}}groups:{{/unless}}  
  {{#ownedElement}}{{#extension}}{{#eq name "TGroup"}}
  {{> (lookup this.name) ../this}}
  {{/eq}}{{/extension}}{{/ownedElement}}
  relationship_templates:
{{#ownedElement}}{{#targetingEnd}}{{#association}}{{#extension}}{{#eq name "TRelationshipTemplate"}}
    {{../name}}:
      type: {{getProperty ../this "type"}}
{{/eq}}{{/extension}}{{/association}}{{/targetingEnd}}{{/ownedElement}}